{% extends "core/base.html" %}
{% block title %}Detalle de Usuario{% endblock %}

{% block content %}

<div class="f1-card mb-4" style="max-width:700px;margin:auto;">
    <h2 class="f1-title mb-3">ðŸ“‡ Detalle del Usuario</h2>

    <p class="mb-1">
        <strong>Usuario Django:</strong> {{ usuario.user.username }}
    </p>
    <p class="mb-1">
        <strong>RUT:</strong> {{ usuario.rut }}
    </p>
    <p class="mb-1">
        <strong>Rol:</strong> <span class="badge bg-info">{{ usuario.get_rol_display }}</span>
    </p>
    <p class="mb-1">
        <strong>Estado:</strong>
        {% if usuario.activo %}
            <span class="badge bg-success">Activo</span>
        {% else %}
            <span class="badge bg-danger">Inactivo</span>
        {% endif %}
    </p>
</div>

{% if trabajos %}
<div class="f1-card" style="max-width:900px;margin:auto;">
    <h4 class="mb-3">Trabajos Asignados (MecÃ¡nico)</h4>

    <table class="table table-dark table-striped align-middle mb-0">
        <thead class="table-light text-dark">
            <tr>
                <th>#</th>
                <th>Cliente</th>
                <th>VehÃ­culo</th>
                <th>Estado</th>
                <th>Fecha Inicio</th>
            </tr>
        </thead>
        <tbody>
            {% for t in trabajos %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ t.cliente }}</td>
                <td>{{ t.vehiculo }}</td>
                <td>
                    {% if t.estado == "Pendiente" %}
                        <span class="badge bg-warning text-dark">Pendiente</span>
                    {% elif t.estado == "En Proceso" %}
                        <span class="badge bg-primary">En Proceso</span>
                    {% else %}
                        <span class="badge bg-success">Finalizado</span>
                    {% endif %}
                </td>
                <td>
                    {% if t.fecha_inicio %}
                        {{ t.fecha_inicio|date:"d/m/Y H:i" }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="f1-card" style="max-width:700px;margin:auto;">
    <p class="mb-0 text-muted">Este usuario no tiene trabajos asignados.</p>
</div>
{% endif %}

<div class="text-center mt-3">
    <a href="{% url 'gestionar_usuarios' %}" class="btn btn-outline-light">â¬… Volver</a>
</div>

{% endblock %}
